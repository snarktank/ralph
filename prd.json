{
  "project": "Ralph",
  "branchName": "ralph/ux-improvements",
  "description": "Enhanced terminal UX with mascot personality, streaming iteration info, and Ghostty-optimized display for better visibility into what Ralph is doing",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create mascot ASCII art module",
      "description": "As a user, I want fun mascot characters to give Ralph personality.",
      "acceptanceCriteria": [
        "Create src/ui/mascot.rs with Mascot enum (Wiggum, KarateKid, PeekingEyes, ThumbsUp)",
        "Define ASCII art constants for each mascot",
        "Implement Mascot::random() using time-based selection",
        "Implement Mascot::art() and Mascot::quotes() methods",
        "Export mascot module from src/ui/mod.rs",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Add peek animation with Ghostty optimization",
      "description": "As a user, I want mascots to animate smoothly by peeking from the side.",
      "acceptanceCriteria": [
        "Define PEEK_FRAMES constants for each mascot (5 frames each)",
        "Create PeekAnimation struct with configurable frame_delay_ms",
        "Implement play() method with ANSI cursor control",
        "Use Ghostty synchronized output for flicker-free animation",
        "Hide cursor during animation, restore after",
        "Create MascotRenderer with render_with_quote() and render_beside_content()",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Integrate mascot into startup display",
      "description": "As a user, I want to see mascots when running ralph --version or --help.",
      "acceptanceCriteria": [
        "Add animate field and MascotRenderer to HelpRenderer struct",
        "Add with_animation() builder method",
        "Update render_version() to show mascot beside version box",
        "Update render_help() to show mascot with random quote",
        "Add --no-animation CLI flag to main.rs",
        "Add --no-animation to GLOBAL_OPTIONS in help.rs",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Create iteration view component",
      "description": "As a user, I want to see what's planned before each iteration starts.",
      "acceptanceCriteria": [
        "Create src/ui/iteration_view.rs module",
        "Create IterationPreview struct showing gates to run",
        "Render pre-iteration header: 'Will run: build -> lint -> test'",
        "Export iteration_view from src/ui/mod.rs",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Add live gate progress display",
      "description": "As a user, I want to see real-time progress of quality gates during iteration.",
      "acceptanceCriteria": [
        "Create GateProgress enum (Pending, Running, Passed, Failed) in iteration_view.rs",
        "Create LiveIterationPanel struct with elapsed time and gate statuses",
        "Render gate progress: checkmark for passed, spinner for running, X for failed",
        "Show timing for completed gates: 'build (1.2s)'",
        "Use Ghostty synchronized output for flicker-free updates",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Add collapsible iteration summaries",
      "description": "As a user, I want completed iterations collapsed into a single summary line.",
      "acceptanceCriteria": [
        "Create IterationSummary struct with pass/fail status and duration",
        "Render collapsed format: '▸ Iteration 1/5: ✓ build ✓ lint ✓ test (3.2s)'",
        "Auto-expand failed iterations to show error details",
        "Stack summaries as iterations complete",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 6,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Add streaming activity indicator",
      "description": "As a user, I want to see what file/action is happening during long operations.",
      "acceptanceCriteria": [
        "Add set_activity() method to display showing current action",
        "Show activity beneath running gate: 'Running: src/tests/auth.rs:142'",
        "Support file paths as clickable Ghostty hyperlinks",
        "Clear activity when gate completes",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 7,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Integrate iteration view with executor",
      "description": "As a user, I want the executor to emit progress events to the UI.",
      "acceptanceCriteria": [
        "Add on_gate_progress callback to executor run_story method",
        "Call show_iteration_preview() before iteration loop starts",
        "Emit gate progress events during run_quality_gates()",
        "Call finish_iteration() with summary after each iteration",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Add progress callbacks to quality gate checker",
      "description": "As a developer, I need quality gates to report progress as they run.",
      "acceptanceCriteria": [
        "Add run_all_gates_with_progress() method to QualityGateChecker",
        "Accept callback: FnMut(&str, GateProgress)",
        "Emit Running before each gate starts",
        "Emit Passed/Failed after each gate completes",
        "Include gate duration in progress updates",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Wire display to MCP server execution",
      "description": "As a user, I want to see iteration progress when running stories via MCP.",
      "acceptanceCriteria": [
        "Update server.rs to pass display to executor",
        "Show iteration view in terminal during run_story tool execution",
        "Display updates in real-time as gates complete",
        "Show final summary when story completes",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    }
  ]
}
