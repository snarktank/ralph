{
  "project": "Ralph",
  "branchName": "ralph/mcp-docker-production",
  "description": "Deploy Ralph MCP server to production using Docker's MCP toolkit, enabling seamless integration with Claude Desktop and other MCP clients via containerized deployment",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create optimized multi-stage Dockerfile",
      "description": "As a DevOps engineer, I need a production-ready Dockerfile that builds Ralph MCP server with minimal image size.",
      "acceptanceCriteria": [
        "Create Dockerfile using multi-stage build pattern",
        "Use rust:1.75-slim-bookworm as builder stage",
        "Use debian:bookworm-slim as runtime stage",
        "Install only necessary runtime dependencies (ca-certificates, libssl3)",
        "Copy only the ralph binary to runtime stage",
        "Set ENTRYPOINT to ralph mcp-server command",
        "Create non-root user 'ralph' for security",
        "Add MCP-related OCI labels (mcp.server, mcp.transport)",
        "Dockerfile syntax is valid (docker build --check passes)"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Add Docker build optimization",
      "description": "As a developer, I need efficient Docker builds with proper caching and small context size.",
      "acceptanceCriteria": [
        "Create .dockerignore excluding target/, .git/, docs/, tests/",
        "Implement dependency caching layer in Dockerfile (copy Cargo.toml first, build deps, then copy src)",
        "Add ARG instructions for VERSION and COMMIT_SHA build args",
        "Add LABEL instructions using build args for version tracking",
        "Document build args usage in Dockerfile comments",
        "Dockerfile syntax is valid"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Create docker-compose for local testing",
      "description": "As a developer, I need docker-compose configuration for local MCP server testing.",
      "acceptanceCriteria": [
        "Create docker-compose.yml with ralph-mcp service",
        "Configure stdin_open: true and tty: true for stdio transport",
        "Add volume mounts for PRD files and quality config",
        "Include RUST_LOG environment variable",
        "Add profile variant 'with-prd' for preloaded PRD testing",
        "docker-compose config validates successfully"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Configure for Docker MCP toolkit",
      "description": "As an MCP user, I need Ralph configured for Docker's MCP toolkit ecosystem.",
      "acceptanceCriteria": [
        "Create examples/mcp-toolkit-config.json with Docker MCP toolkit format",
        "Config specifies image name ghcr.io/kcirtapfromspace/ralph:latest",
        "Config includes stdio transport settings",
        "Add HEALTHCHECK instruction to Dockerfile",
        "Document config usage in examples/README.md",
        "JSON config is valid syntax"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Add GitHub Container Registry publishing",
      "description": "As a release manager, I need automated Docker image publishing to GHCR.",
      "acceptanceCriteria": [
        "Create .github/workflows/docker.yml workflow",
        "Trigger on push to main branch and v* tags",
        "Use docker/build-push-action for multi-platform builds",
        "Build for linux/amd64 and linux/arm64 platforms",
        "Push to ghcr.io/kcirtapfromspace/ralph",
        "Tag with version, latest, and git SHA using docker/metadata-action",
        "Workflow YAML is valid syntax"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Document Docker MCP integration",
      "description": "As a user, I need comprehensive documentation for running Ralph via Docker MCP toolkit.",
      "acceptanceCriteria": [
        "Create docs/guides/docker-mcp-setup.md",
        "Document Docker and Docker MCP toolkit prerequisites",
        "Provide step-by-step configuration instructions",
        "Include example docker run commands",
        "Add troubleshooting section with common issues",
        "Add link to guide from README.md",
        "All markdown links are valid"
      ],
      "priority": 6,
      "passes": true,
      "notes": ""
    }
  ]
}
