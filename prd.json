{
  "project": "Ralph",
  "branchName": "ralph/mcp-prd-skills",
  "description": "Ensure default terminal experience works (run `ralph` with no args to iterate through all stories until complete) and add /prd and /ralph skills as MCP tools for Claude Desktop users",
  "userStories": [
    {
      "id": "US-001",
      "title": "Verify and fix default terminal iteration behavior",
      "description": "As a terminal user, I want to run `ralph` with no arguments and have it automatically iterate through all stories until all pass.",
      "acceptanceCriteria": [
        "Running `ralph` with no args in a directory with prd.json starts execution",
        "Picks highest priority story where `passes: false`",
        "Continues iterating until all stories have `passes: true`",
        "If a story fails, retries on next iteration (doesn't get stuck)",
        "Supports large PRDs (40+ stories) across unlimited iterations",
        "Outputs `<promise>COMPLETE</promise>` when all stories pass",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "This is the core Ralph experience - must work reliably"
    },
    {
      "id": "US-002",
      "title": "Add generate_prd MCP tool schema",
      "description": "As a developer, I need to define the MCP tool schema for PRD generation so Claude Desktop can discover and call it.",
      "acceptanceCriteria": [
        "Add `generate_prd` tool registration in `src/mcp/server.rs`",
        "Tool accepts `description` (required), `questions` (optional object), `output_path` (optional)",
        "Tool returns `content` (PRD markdown) and `file_path` (if written)",
        "Schema includes proper descriptions for Claude to understand usage",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Implement generate_prd tool handler",
      "description": "As a Claude Desktop user, I want to generate a PRD from a feature description so I can plan features without leaving the chat.",
      "acceptanceCriteria": [
        "Create `src/mcp/tools/generate_prd.rs` module",
        "Load PRD skill template from embedded resource or skills directory",
        "Generate PRD markdown following the skill template structure",
        "If `questions` parameter provided, use those answers instead of defaults",
        "If `output_path` provided, write file and return path",
        "Always return generated PRD content in response",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Add convert_prd_to_json MCP tool schema",
      "description": "As a developer, I need to define the MCP tool schema for PRD-to-JSON conversion so Claude Desktop can discover and call it.",
      "acceptanceCriteria": [
        "Add `convert_prd_to_json` tool registration in `src/mcp/server.rs`",
        "Tool accepts `prd_content` (string) OR `prd_path` (file path)",
        "Tool accepts `output_path` (optional, defaults to workspace/prd.json)",
        "Tool accepts `auto_load` (boolean, default true)",
        "Schema includes proper descriptions for Claude to understand usage",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Implement convert_prd_to_json tool handler",
      "description": "As a Claude Desktop user, I want to convert a PRD to Ralph's JSON format so I can start autonomous execution.",
      "acceptanceCriteria": [
        "Create `src/mcp/tools/convert_prd.rs` module",
        "Parse PRD markdown and extract user stories, requirements",
        "Generate valid prd.json with proper structure (project, branchName, userStories)",
        "Auto-generate `branchName` from project name if not specified",
        "Set all stories to `passes: false` initially",
        "Write to `output_path` if provided",
        "If `auto_load` is true, call internal load_prd logic",
        "Return JSON content and loaded status in response",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Embed skill templates in binary",
      "description": "As a developer, I need the skill templates embedded in the binary so the Docker image is self-contained.",
      "acceptanceCriteria": [
        "Use `include_str!` or similar to embed `skills/prd/SKILL.md` content",
        "Use `include_str!` or similar to embed `skills/ralph/SKILL.md` content",
        "Templates accessible at runtime without external file dependencies",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Add integration tests for new MCP tools",
      "description": "As a developer, I need tests to verify the new tools work correctly.",
      "acceptanceCriteria": [
        "Test `generate_prd` with minimal description returns valid markdown",
        "Test `generate_prd` with questions parameter uses provided answers",
        "Test `generate_prd` with output_path writes file correctly",
        "Test `convert_prd_to_json` parses sample PRD correctly",
        "Test `convert_prd_to_json` with auto_load=true loads the PRD",
        "Test `convert_prd_to_json` generates valid JSON structure",
        "All tests pass"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Update documentation for new MCP tools",
      "description": "As a user, I need documentation on how to use the new MCP tools in Claude Desktop.",
      "acceptanceCriteria": [
        "Update `docs/guides/docker-mcp-setup.md` with new tool examples",
        "Document `generate_prd` parameters and usage",
        "Document `convert_prd_to_json` parameters and usage",
        "Add example conversation flows",
        "All markdown links valid"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    }
  ]
}
